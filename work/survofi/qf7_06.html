<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
     <!--
         Created by using the PRINT operation of SURVO MM 
          For more information, see http://www.survo.fi/  
         -->
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
<META NAME="Generator" CONTENT="SURVO MM">
<TITLE>SURVO&nbsp;MM&nbsp;Help&nbsp;System&nbsp;(web&nbsp;edition)</TITLE>
<LINK REL="stylesheet" HREF="q.css" TYPE="text/css">
<META NAME="Description" CONTENT="SURVO&nbsp;MM&nbsp;Help&nbsp;System&nbsp;(web&nbsp;edition)">
<META NAME="Classification" CONTENT="help system">
<META NAME="Keywords" CONTENT="Survo, help, hypertext">
</HEAD>
<BODY>
<H1><IMG SRC="../survologo1.gif" WIDTH="200" HEIGHT="82" ALT="SURVO&nbsp;MM">&nbsp;<A HREF="mainmenu.html">Help&nbsp;System&nbsp;(web&nbsp;edition)</A></H1>
<P><PRE CLASS="HelpText">FILE AGGR &lt;data&gt; BY &lt;aggr_variable&gt; TO &lt;new_data_file&gt; 
with a VARIABLES list forms a new data file
by aggregating consecutive observations (with a same value
in &lt;aggr_variable&gt;) according to different rules (functions).

The VARIABLES list is given below the FILE AGGR operation line in the form:
VARIABLES:
A1 Function1 X1 Condition1
A2 Function2 X2 Condition2
.. ......... .. ..........
END

&lt;data&gt; must be sorted by &lt;aggr_variable&gt; before using FILE AGGR.
In the VARIABLES list, A1,A2,... are names of aggregated variables.
Also the type of a variable can be given as Sum:8, Name:S16.
Possible functions are listed on the next page.
X1,X2,... are names of variables in &lt;data&gt; to be aggregated.
Conditions are given in the form a1*a2+...+b1*b2*... (as in SELECT)
Each of terms a1,a2, etc. is given as a condition of type IND or CASES.

Functions in FILE AGGR:
N        Number of cases
         Example: Nbig   N  -  Big / Big=Popul,30000,500000
         `-' above means that N assumes no X variable.
SUM      Sum of observations
         Example: Popul:8  SUM  Popul
MEAN     Arithmetic mean of observations
STDDEV   Standard deviation
MIN      Minimum value
MAX      Maximum value
#VALUES  # of different values (&lt;data&gt; must be sorted also with respect
                                 to the X variable.)
FIRST    Value of the first observation within the aggregate
         Typically, the name of the aggregate is copied by FIRST.
         Example: Province FIRST Province
LAST     Value of the last observation within the aggregate
NMISS    Number of missing observations
SUMS     Sum of observations. If any are missing, the result is missing.
MISSING  Just a new variable with missing values is created.
                                   (To be continued on the next page)

Functions in FILE AGGR (Continued):
MODE          Mode of the observations
MEDIAN        Median of the observations
FRACTILE(p)   p-fractile of the observations (0&lt;=p&lt;=1)
ORDER(k)      Observation Xk in the ordered sample X1&lt;=X2&lt;=...&lt;=Xn
              If k&lt;0, observation X(n+k-1)
              Example: ORDER(-1) is same as MAX.
ORDERN(k,V)   Value of variable V for the kth observation
              Example: Maxcomm ORDERN(-1,Commune) Popul
TMEAN(k)      Trimmed mean when k largest and least cases are omitted
TPMEAN(p)     Trimmed mean on rejection probability level p (0&lt;p&lt;0.5)
CORR(V)       Correlation of the X and the V variable
SLOPE(V)      Slope a in the regression model X=a*V+b+eps
INTERCEPT(V)  Intercept constant b in the above regression model.
              In the 3 last functions V can be replaced by ORDER i.e.
              order 1,2,...,n of observation within the aggregate.
An application of FILE AGGR is presented by the sucro
/AGGRDEMO
  <A HREF="qf7_07.html">A = Using several aggregation variables</A> 
  <A HREF="qf1_01.html">D = More information on data management</A> 
</PRE></P><HR>
<DIV CLASS="Details"><SMALL>More information on Survo from <A HREF="http://www.survo.fi/">www.survo.fi</A></SMALL><BR><SMALL>Copyright &copy; Survo Systems 2001-2012.<BR><A HREF="mailto:webmaster'at'survo.fi">webmaster'at'survo.fi</A></SMALL></DIV>
</BODY>
</HTML>
